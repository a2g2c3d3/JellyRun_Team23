## ***팀 23조 화성갈끄니까*** 




## 🍪 **쿠키런 모작 프로젝트**

Unity 기반으로 개발한 쿠키런 스타일의 2D 횡스크롤 러닝 게임입니다.  
원작인 "쿠키런"을 참고하여 스테이지, 체력, 장애물, 점수, UI 시스템 등을 구현하였으며, 팀 단위로 개발했습니다.

---

## 📸 게임 스크린샷

![게임 시작 화면](깃허브에 넣고 링크)
![플레이 화면](깃허브에 넣고 링크)

---

## 🎮 **게임 소개**

- 플레이어는 자동으로 오른쪽으로 달리며, 스페이스바를 눌러 점프, 쉬프트 키로 슬라이딩을 할 수 있습니다.
- 장애물은 땅에 설치된 장애물과 머리 위에 설치된 장애물이 있으며, 각각 점프 또는 슬라이딩으로 회피해야 합니다.
- 게임 중 젤리를 수집하면 점수가 올라가며, 체력은 시간이 지남에 따라 서서히 감소하고 장애물에 부딪히면 추가로 감소합니다.
- 체력이 모두 소진되면 게임이 종료되며, 최종 점수가 기록됩니다.
- 스테이지 클리어 시 점수와 최고 점수 갱신 여부를 확인할 수 있으며, 다시 도전하거나 로비로 돌아갈 수 있습니다.
- UI에는 현재 점수, 체력 바, 스테이지 진행 상황이 실시간으로 표시됩니다.
- 카메라는 플레이어를 따라다니며 부드럽게 이동합니다.

| 항목       | 내용                                                                 |
|------------|----------------------------------------------------------------------|
| 엔진 버전 | ![Unity](https://img.shields.io/badge/Engine-Unity_2022.3.17f1_LTS-blue) |
| 개발 상태 | ![Status](https://img.shields.io/badge/Status-Completed-brightgreen)   |
| 플랫폼   | ![Platform](https://img.shields.io/badge/Platform-PC-lightgrey)     |
| 라이선스  | ![License](https://img.shields.io/badge/License-Educational-red)    |


## 🕹️ **게임 방식 요약**

| 요소 | 설명 |
|------|------|
| 이동 | 자동 달리기 |
| 조작 | 스페이스: 점프, 쉬프트: 슬라이딩, 중력증가|
| 목적 | 점수 최대 획득 + 생존 |

---

## 🚀 실행 방법

1. Unity Hub에서 Unity 2022.3.17f1 버전을 설치합니다.
2. 프로젝트 폴더를 Unity Hub에 추가하고 엽니다.
3. `Assets/Scenes/Main.unity` 씬을 열고 플레이 버튼(▶️)을 눌러 게임을 시작합니다.
4. 빌드하려면 메뉴에서 File > Build Settings를 열고 플랫폼을 선택 후 Build 버튼을 클릭하세요.

---

##👨‍👩‍👧‍👦 **팀 구성**
| 이름 | 담당 |
|------|------|
| 김도율 | 팀장. InGame UI 전체 설계 + 팝업 UI 구현 |
| 신승민 | 카메라 무빙, 캐릭터|
| 박정현 | 스테이지 디자인(타일형식) + 스크롤 구현 |
| 원정우 | 아이템(부스터, 체력회복) 구현 |
| 정보석 | 씬 관리, 로비 구현, 상점 시스템 구현 |

---
##🎯 **기획 의도**
본 프로젝트는 협업에 대한 경험을 쌓으면서, 러너 게임의 구조와 구현 방식을 학습하고자 시작되었습니다.  
쿠키런을 벤치마킹하여, 점프/슬라이딩 조작, 장애물 회피, 체력/점수 시스템 등을 중심으로 제작했습니다.

특히 Unity에서의 Rigidbody2D 활용, 카메라 추적, UI 팝업, 씬 전환 등을 팀원 간 역할을 나누어 구현하였고,  
이를 통해 게임 개발의 전체 흐름과 협업 프로세스를 직접 체험하고자 했습니다.

---

## 🧩 **주요 기능**

| 기능 | 설명 |
|------|------|
| ✅ 자동 달리기 시스템 | Rigidbody2D 기반 이동 구현 |
| ✅ 점프 / 슬라이딩 | 키 입력에 따라 동작 전환 |
| ✅ 점수 및 젤리 수집 | UI에 실시간 반영 |
| ✅ 체력 시스템 | 시간이 지남에 따라 감소, 피격 시 추가 감소 |
| ✅ 스테이지 UI | 시작/클리어 팝업, 재시작, 로비 이동 버튼 등 |
| ✅ 카메라 추적 | 플레이어를 따라다니는 카메라 |

---

## 🧱 폴더 구조
Assets/  
├── Animations/        # 애니메이션 관련 에셋 (.anim, AnimatorController 등)  
├── External/          # 외부 무료 에셋 (스프라이트, 오디오 등)  
├── Prefabs/           # 프리팹 오브젝트 모음  
├── Scenes/            # Unity 씬 파일들 (.unity)  
├── Scripts/           # 전체 C# 스크립트  
├── Sound/             # 효과음(SFX), 배경음(BGM) 등 오디오 파일  
└── TextMesh Pro/      # TextMesh Pro 관련 설정 및 폰트 에셋  

 
---

## 트러블 슈팅

🎯 패턴이 겹치거나 화면 안에서 갑자기 나타나는 문제
🧩 배경
2D 횡스크롤 러닝 게임을 개발 중이며, BgLooper로 배경이 반복 재생되고, PatternManager를 통해 장애물(패턴)을 일정 간격으로 생성하는 시스템을 구축하고 있었습니다.


void SpawnPattern()
{
    if (patternPrefabs.Length == 0) return;

    int rand = Random.Range(0, patternPrefabs.Length);
    float spawnX = player.position.x + patternSpacing;
    Vector3 spawnPos = new Vector3(spawnX, 0f, 0f);

    Instantiate(patternPrefabs[rand], spawnPos, Quaternion.identity);
}
🐞 문제 현상
패턴이 겹쳐서 생성되는 문제

카메라가 보여주는 화면 안에서 패턴이 갑자기 나타나는 현상

⛔ 주로 캐릭터가 장애물에 부딪혀 밀려나거나, 속도가 느려지는 경우 발생
⛔ 배경은 자연스럽게 흐르지만, 패턴은 고정 간격 생성이기 때문에 시점과 타이밍이 어긋남

🔍 원인 분석
패턴이 시간 기반 또는 고정 위치로 생성되기 때문에,

플레이어의 실시간 위치를 고려하지 못함

결과적으로 패턴이 현재 시점에서 너무 가까운 곳에 생성되어 시야 안에서 갑자기 등장하거나,

기존 패턴과 겹쳐 생성되는 문제가 발생함

✅ 해결 방법
🎯 패턴 생성 위치를 플레이어 기준으로 조정
패턴의 생성 위치를 player.position.x + patternSpacing으로 설정
→ 즉, 플레이어 기준으로 일정 거리 앞에 생성되도록 변경

patternSpacing은 카메라의 중앙에 있는 플레이어로부터 오른쪽 끝까지의 거리를 의미

🧪 개선 결과
패턴이 항상 플레이어 앞쪽의 카메라 밖에서 생성되어 자연스럽게 등장

플레이어가 속도가 느려지거나 밀려나도 겹치지 않음

게임의 시각적 안정성과 난이도 예측성이 향상됨

##트러블 슈팅 2
트러블 1 : BGM 클래스에서 씬이 이동 할 때 마다 오디오 클립을 바꿔주려 했다.
하지만 씬을 이동하는 클래스에서 메서드를 실행 해야 했기 때문에 clip인자를 받을 방법이 생각 나지 않았다.

해결을 위해 시도해 본 방법

방법 1. 우선 씬 이동을 감지 할 수단이 필요한 것 같았다.
> 씬 이름을 필드변수로 두고 값을 받아왔다. 이제 씬이 변경 되는 순간을 감지 할 수 있었다.

그 다음은 씬이 변경 될 때 마다 그 씬에 맞는 오디오 클립을 넣어주면 될 것 같았다.
> 씬 이름에 따라 실행 되는 건 if 혹은 switch문이 있었던 것 같다. 그중 if문을 활용했다.

해결
씬 이동을 다른 클래스에서 감지 하는게 아닌 본인 클래스 안에서 감지를 하고 원하는 기능을 할 수 있게 구현했다.
의존성은 낮은 것 같다.

트러블 2 :  받아와야 하는 컴퍼넌트의 오브젝트가 씬이 시작하면 꺼지는 오브젝트라 제대로 받아오지 못함.

해결을 위해 시도해 본 방법

방법 1. Awake 에서 실행해 보기, 및 디버깅
>실패 디버그가 나오지 않았다. 실패 정확한 이유는 모르겠지만 아마 실행 순서에 문제가 있는 것 같다. 이미 꺼진 후에야 오브젝트를 찾기 때문에 이미 꺼진 것 같다.

방법 2. 이벤트(Action)를 만들고 함수를 등록해 씬이 이동 할 때 실행해보기
>실패 이것 역시 이유는 아직 모르겠지만 실행순서에 문제가 있는 것 같다. 찾아야 하는 컴퍼넌트가 우선 실행 되는 것 같음

방법 3. 다른 팀원 분이 찾은 방법이지만 반대로 가져오려던 컴포넌트에서 현재 컴포넌트를 부름 (예 SFX컴포넌트에서 Slide를 가져오려 하고 있었다면 반대로 Slide 에서 시도)
> 정상적으로 작동함. 이유는 아마 꺼지기 전에 먼저 실행 하기 때문 인 것 같음, 순서 문제 였던 것 같지만 아직 정확한 이해가 없어 나중에 튜터님께 여쭤봐야 할 것 같음

해결
받아오고 설정하는 것을 꼭 한 곳에서 할 필요가 없고 상황에 맞춰 적절하게 서로에게 상속 혹은 의존을 할 수 있는 것 같다.
SFX에서 꼭 Slide를 받고 이벤트를 연결 해 줄 필요 없이 Slide에서 SFX를 받아 이벤트를 연결 해 줄 수도 있었다는 것을 너무 늦게 알았다.

